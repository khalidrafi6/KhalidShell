<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Troubleshooting on Khalid&#39;s Shell</title>
    <link>http://localhost:1313/en/tags/troubleshooting/</link>
    <description>Recent content in Troubleshooting on Khalid&#39;s Shell</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    <lastBuildDate>Sat, 01 Mar 2025 00:05:03 +0600</lastBuildDate><atom:link href="http://localhost:1313/en/tags/troubleshooting/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Linux Frozen? Recover and Troubleshoot System Issues with SysRq Commands</title>
      <link>http://localhost:1313/en/posts/sysrq-linux/</link>
      <pubDate>Sat, 01 Mar 2025 00:05:03 +0600</pubDate>
      
      <guid>http://localhost:1313/en/posts/sysrq-linux/</guid>
      <description>&lt;p&gt;Linux &lt;strong&gt;SysRq&lt;/strong&gt; commands are a lifesaver when your system freezes or becomes unresponsive. The kernel always responds to these commands, no matter what state the computer is in. However, if the kernel itself is completely locked up, that&amp;rsquo;s a different story. The &lt;strong&gt;SysRq&lt;/strong&gt; feature is extremely useful when system issues occur. For example, if your Linux is frozen and stops responding to any input, you can use &lt;strong&gt;SysRq&lt;/strong&gt; command to shut down or reboot the computer.&lt;/p&gt;</description>
      <content>&lt;p&gt;Linux &lt;strong&gt;SysRq&lt;/strong&gt; commands are a lifesaver when your system freezes or becomes unresponsive. The kernel always responds to these commands, no matter what state the computer is in. However, if the kernel itself is completely locked up, that&amp;rsquo;s a different story. The &lt;strong&gt;SysRq&lt;/strong&gt; feature is extremely useful when system issues occur. For example, if your Linux is frozen and stops responding to any input, you can use &lt;strong&gt;SysRq&lt;/strong&gt; command to shut down or reboot the computer.&lt;/p&gt;
&lt;h2 id=&#34;how-to-enable-sysrq&#34;&gt;How to Enable SysRq&lt;/h2&gt;
&lt;p&gt;If your kernel was compiled with &lt;strong&gt;SysRq&lt;/strong&gt; support, you can enable/disable its functions via &lt;code&gt;/proc/sys/kernel/sysrq&lt;/code&gt;. The &lt;code&gt;/proc/sys/kernel/sysrq&lt;/code&gt; file may contain the following values:&lt;/p&gt;
&lt;p&gt;0 - Completely disables &lt;strong&gt;SysRq&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1 - Enables all &lt;strong&gt;SysRq&lt;/strong&gt; functions&lt;/p&gt;
&lt;p&gt;&amp;gt; 1 - &lt;strong&gt;bitmask&lt;/strong&gt; of allowed &lt;strong&gt;SysRq&lt;/strong&gt; functions&lt;/p&gt;
&lt;p&gt;You can set values in this file using the following command:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;echo NUMBER &amp;gt; /proc/sys/kernel/sysrq
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Note that this file only controls keyboard-initiated SysRq usage. You can use any command via &lt;code&gt;/proc/sysrq-trigger&lt;/code&gt;, even if it&amp;rsquo;s not enabled in the aforementioned file.&lt;/p&gt;
&lt;h2 id=&#34;how-to-use-sysrq&#34;&gt;How to Use SysRq&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;On x86 systems&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;ALT&lt;/code&gt; + &lt;code&gt;SysRq&lt;/code&gt; +&lt;code&gt;&amp;lt;command key&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;strong&gt;Note:&lt;/strong&gt; Many keyboards don&amp;rsquo;t have a dedicated SysRq key. SysRq is often shared with the Print Screen key, typically labeled &amp;ldquo;Print Screen&amp;rdquo; on top and &amp;ldquo;SysRq&amp;rdquo; on the bottom.&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;On any system&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Write a &lt;code&gt;&amp;lt;command key&amp;gt;&lt;/code&gt; to the &lt;code&gt;/proc/sysrq-trigger&lt;/code&gt; file. For example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;echo b &amp;gt; /proc/sysrq-trigger
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you want to execute multiple commands, prefix them with _:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;echo _reisub &amp;gt; /proc/sysrq-trigger
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;list-of-sysrq-command-key-functions&#34;&gt;List of SysRq &lt;code&gt;&amp;lt;command key&amp;gt;&lt;/code&gt; functions&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;b&lt;/code&gt; - Immediately reboots the system without syncing or unmounting disks&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;c&lt;/code&gt; - Crashes the system to collect a crash dump (if configured)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;e&lt;/code&gt; - Sends &lt;code&gt;SIGTERM&lt;/code&gt; to all processes except &lt;code&gt;init&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;f&lt;/code&gt; - Invokes the &lt;strong&gt;OOM killer&lt;/strong&gt; to kill memory-hogging processes&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;h&lt;/code&gt; - Shows help&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;i&lt;/code&gt; - Sends &lt;code&gt;SIGKILL&lt;/code&gt; to all processes except &lt;code&gt;init&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;k&lt;/code&gt; - &lt;strong&gt;Secure Access Key (SAK)&lt;/strong&gt; kills all programs on current virtual console&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;o&lt;/code&gt; - Powers off the computer&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;r&lt;/code&gt; - Turns off keyboard raw mode and sets &lt;code&gt;XLATE&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;s&lt;/code&gt; - Attempts to sync all mounted filesystems&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;t&lt;/code&gt; - Dumps a list of current tasks and their information to console&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;u&lt;/code&gt; - Attempts to remount all mounted filesystems as read-only&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;w&lt;/code&gt; - Dumps tasks that are in uninterruptible (blocked) state&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;0-9&lt;/code&gt; - Sets console log level, controlling which kernel messages appear&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R&lt;/code&gt; - Replays kernel log messages to console&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;practical-applications&#34;&gt;Practical applications&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;r&lt;/code&gt; - Useful when &lt;strong&gt;X server&lt;/strong&gt; or any &lt;strong&gt;svgalib&lt;/strong&gt; program crashes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;k&lt;/code&gt; - &lt;strong&gt;Secure Access Key (SAK)&lt;/strong&gt; is useful to ensure no &lt;strong&gt;Trojan&lt;/strong&gt; is running on the console, as it kills all programs on the current virtual console. This helps verify that the login prompt comes from genuine &lt;code&gt;init&lt;/code&gt; rather than a Trojan. Because a Trojan can steal your password when logging in. It&amp;rsquo;s also used when a program (like &lt;strong&gt;X&lt;/strong&gt; or &lt;strong&gt;svgalib&lt;/strong&gt;) won&amp;rsquo;t release the console.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;b&lt;/code&gt;, &lt;code&gt;o&lt;/code&gt; - Used when you can&amp;rsquo;t shut down the computer normally.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;c&lt;/code&gt; - Crashes the system to collect crash dumps (if dump collection is configured).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;s&lt;/code&gt; - Ensures data is written to disk. Useful before removing media or after using a rescue shell (if it lacks shutdown functionality). Note that sync isn&amp;rsquo;t complete until you see &lt;strong&gt;&amp;ldquo;OK&amp;rdquo;&lt;/strong&gt; or &lt;strong&gt;&amp;ldquo;Done&amp;rdquo;&lt;/strong&gt; on screen.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Log levels &lt;code&gt;0-9&lt;/code&gt; help when the console is flooded with non-critical kernel messages. Level 0 shows only the most critical messages (&lt;code&gt;PANIC&lt;/code&gt; and &lt;code&gt;OOPS&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;e&lt;/code&gt;, &lt;code&gt;i&lt;/code&gt; - Useful when you can&amp;rsquo;t terminate a &lt;strong&gt;runaway&lt;/strong&gt; process by other means.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R&lt;/code&gt; - This helps view kernel log messages when the system hangs or when you can&amp;rsquo;t use &lt;strong&gt;dmesg&lt;/strong&gt; to read the &lt;strong&gt;printk&lt;/strong&gt; buffer.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For more details about the &lt;strong&gt;SysRq Key&lt;/strong&gt;, visit &lt;a href=&#34;https://www.kernel.org/doc/html/latest/admin-guide/sysrq.html&#34;&gt;this link&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Source:&lt;/strong&gt; &lt;a href=&#34;https://www.kernel.org/doc/html/latest/admin-guide/sysrq.html&#34;&gt;The Linux Kernel Documentation&lt;/a&gt;&lt;/p&gt;
</content>
    </item>
    
  </channel>
</rss>
